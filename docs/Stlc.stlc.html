<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/stlcnorm" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Stlc.stlc</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Normalization for Call-by-Value Simply-Typed Lambda Calculus.</h1>

<div class="paragraph"> </div>

 <div class="authors">  Authors: Martin Elsman and Danil Annenkov, University of Copenhagen  </div>  
<div class="paragraph"> </div>

 In the present formalization, we consider simply-typed lambda calculus (STLC) with 
    primitive type of integers. We show how to prove the normalization property of STLC
    using the Tait's method. The key observation is that we can define logical relation
    required for the proof of normalization using Coq's fixpoint construct.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h2 class="section">Basic definitions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="Ty"><span class="id" title="inductive">Ty</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="tInt"><span class="id" title="constructor">tInt</span></a> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a><br/>
&nbsp;&nbsp;| <a name="tArr"><span class="id" title="constructor">tArr</span></a> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">&quot;</span></a>A :-&gt; B" := (<a class="idref" href="Stlc.stlc.html#tArr"><span class="id" title="constructor">tArr</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
</div>

<div class="doc">
The syntax for STLC. We use Coq's <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a></span> type to represent variable names 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Exp"><span class="id" title="inductive">Exp</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="Int"><span class="id" title="constructor">Int</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="Var"><span class="id" title="constructor">Var</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="Lam"><span class="id" title="constructor">Lam</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a><br/>
&nbsp;&nbsp;| <a name="App"><span class="id" title="constructor">App</span></a> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Environments are defined inductively 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Env"><span class="id" title="inductive">Env</span></a> {<span class="id" title="var">A</span>:<span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="empty"><span class="id" title="constructor">empty</span></a> : <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a><br/>
&nbsp;&nbsp;| <a name="cons"><span class="id" title="constructor">cons</span></a>  : <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a>.<br/>

<br/>
</div>

<div class="doc">
We have two kinds of notation for environment extension. 
<div class="paragraph"> </div>

  A typing context extension: 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="3327b65217f39b3bb388fb1cc76c719c"><span class="id" title="notation">&quot;</span></a>Gamma , a @ A" := (<a class="idref" href="Stlc.stlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">a</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 201).<br/>
</div>

<div class="doc">
A value environment extension: 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">&quot;</span></a>E # [ a ~&gt; v ]" := (<a class="idref" href="Stlc.stlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">E</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="lookEnv"><span class="id" title="definition">lookEnv</span></a> {<span class="id" title="var">T</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Stlc.stlc.html#T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Stlc.stlc.html#empty"><span class="id" title="constructor">empty</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Stlc.stlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">E</span> <span class="id" title="var">y</span> <span class="id" title="var">A</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#eqb"><span class="id" title="definition">eqb</span></a> <span class="id" title="var">y</span> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">A</span> <span class="id" title="keyword">else</span> <a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="TEnv"><span class="id" title="definition">TEnv</span></a> : <span class="id" title="keyword">Set</span> := <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>).<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;[ Gamma |- a @ A ]".<br/>

<br/>
</div>

<div class="doc">
The usual typing rules for the STLC 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Typing"><span class="id" title="inductive">Typing</span></a> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="tyInt"><span class="id" title="constructor">tyInt</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="Stlc.stlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#tInt"><span class="id" title="constructor">tInt</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="tyVar"><span class="id" title="constructor">tyVar</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">A</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="tyLam"><span class="id" title="constructor">tyLam</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">b</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a><a class="idref" href="Stlc.stlc.html#3327b65217f39b3bb388fb1cc76c719c"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#3327b65217f39b3bb388fb1cc76c719c"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.stlc.html#3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">:-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)]</span></a><br/>
&nbsp;&nbsp;| <a name="tyApp"><span class="id" title="constructor">tyApp</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.stlc.html#3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">:-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#App"><span class="id" title="constructor">App</span></a> <a class="idref" href="Stlc.stlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a><br/>
<span class="id" title="keyword">where</span> <a name="c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">&quot;</span></a>[ Gamma |- a @ A ]" := (<a class="idref" href="Stlc.stlc.html#Typing"><span class="id" title="inductive">Typing</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">a</span> <span class="id" title="var">A</span>).<br/>

<br/>
</div>

<div class="doc">
The values are either an integer or a closure, corresponding to a lambda abstraction 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Val"><span class="id" title="inductive">Val</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="vInt"><span class="id" title="constructor">vInt</span></a>  : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><br/>
&nbsp;&nbsp;| <a name="vClos"><span class="id" title="constructor">vClos</span></a> : <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="DEnv"><span class="id" title="definition">DEnv</span></a> := <a class="idref" href="Stlc.stlc.html#Env"><span class="id" title="inductive">Env</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>).<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;[ E |- a ==&gt; v ]".<br/>

<br/>
</div>

<div class="doc">
We define big-step evaluation relation in a call-by-value style. 
    We do not use substitution, instead we are explicitly passing 
    a value environment 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="Eval"><span class="id" title="inductive">Eval</span></a> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="eInt"><span class="id" title="constructor">eInt</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="Stlc.stlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#vInt"><span class="id" title="constructor">vInt</span></a> <a class="idref" href="Stlc.stlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="eVar"><span class="id" title="constructor">eVar</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="eLam"><span class="id" title="constructor">eLam</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#vClos"><span class="id" title="constructor">vClos</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a name="eApp"><span class="id" title="constructor">eApp</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">E</span> <span class="id" title="var">E0</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">e0</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">v</span> <span class="id" title="var">va</span> : <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#vClos"><span class="id" title="constructor">vClos</span></a> <a class="idref" href="Stlc.stlc.html#E0"><span class="id" title="variable">E0</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#e0"><span class="id" title="variable">e0</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#va"><span class="id" title="variable">va</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E0"><span class="id" title="variable">E0</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="Stlc.stlc.html#va"><span class="id" title="variable">va</span></a><a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">]</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#e0"><span class="id" title="variable">e0</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#App"><span class="id" title="constructor">App</span></a> <a class="idref" href="Stlc.stlc.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a><br/>
<span class="id" title="keyword">where</span> <a name="e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">&quot;</span></a>[ E |- a ==&gt; v ]" := (<a class="idref" href="Stlc.stlc.html#Eval"><span class="id" title="inductive">Eval</span></a> <span class="id" title="var">E</span> <span class="id" title="var">a</span> <span class="id" title="var">v</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h2 class="section">The logical relation</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;[ |= v @ t ]".<br/>

<br/>
</div>

<div class="doc">
The very core of our proof of normalization is a logical relation, 
    defined recursively on a structure of types in our STLC 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="Equiv"><span class="id" title="definition">Equiv</span></a> (<span class="id" title="var">val</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>) (<span class="id" title="var">ty</span>:<a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#tInt"><span class="id" title="constructor">tInt</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#vInt"><span class="id" title="constructor">vInt</span></a> <a class="idref" href="Stlc.stlc.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Stlc.stlc.html#tArr"><span class="id" title="constructor">tArr</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">a</span>:<a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">E</span>:<a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.stlc.html#vClos"><span class="id" title="constructor">vClos</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">v1</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>, <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <span class="id" title="var">A</span> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">v2</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="Stlc.stlc.html#v1"><span class="id" title="variable">v1</span></a><a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">]</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#v2"><span class="id" title="variable">v2</span></a><a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#v2"><span class="id" title="variable">v2</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <span class="id" title="var">B</span> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">where</span> <a name="502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">&quot;</span></a>[ |= v @ t ]" := (<a class="idref" href="Stlc.stlc.html#Equiv"><span class="id" title="definition">Equiv</span></a> <span class="id" title="var">v</span> <span class="id" title="var">t</span>).<br/>
</div>

<div class="doc">
It is crucial to use a fixpoint for the definition of <span class="inlinecode"><a class="idref" href="Stlc.stlc.html#Equiv"><span class="id" title="definition">Equiv</span></a></span>, 
    because naive inductive definition will not pass strict positivity check 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">&quot;</span></a>[ |= v @ t ]" := (<a class="idref" href="Stlc.stlc.html#Equiv"><span class="id" title="definition">Equiv</span></a> <span class="id" title="var">v</span> <span class="id" title="var">t</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="EquivEnv"><span class="id" title="definition">EquivEnv</span></a> (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">val</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">ty</span>:<a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">ty</span>:<a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">val</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">&quot;</span></a>[ |== E @ Gamma ]" := (<a class="idref" href="Stlc.stlc.html#EquivEnv"><span class="id" title="definition">EquivEnv</span></a> <span class="id" title="var">E</span> <span class="id" title="var">Gamma</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="Look"><span class="id" title="lemma">Look</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">ty</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>) (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">|==</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">v</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#lookEnv"><span class="id" title="definition">lookEnv</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Stlc.stlc.html#EquivEnv"><span class="id" title="definition">EquivEnv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intuition</span>;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="EquivExtend"><span class="id" title="lemma">EquivExtend</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">val</span> : <a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a>) (<span class="id" title="var">ty</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">|==</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">|==</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a><a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">]</span></a><a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a><a class="idref" href="Stlc.stlc.html#3327b65217f39b3bb388fb1cc76c719c"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Stlc.stlc.html#3327b65217f39b3bb388fb1cc76c719c"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a><a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">E</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <span class="id" title="var">ty</span> <span class="id" title="var">Hty</span> <span class="id" title="var">Heqv</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">v'</span> <span class="id" title="var">E'</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s'</span>)%<span class="id" title="var">string</span> <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H1</span> <span class="id" title="var">s'</span> <span class="id" title="var">v'</span> <span class="id" title="var">E'</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s'</span>)%<span class="id" title="var">string</span> <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">E'</span>;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H2</span> <span class="id" title="var">s'</span> <span class="id" title="var">v'</span> <span class="id" title="var">E'</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h2 class="section">Normalization</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.stlc.html#Typing"><span class="id" title="inductive">Typing</span></a> <a class="idref" href="Stlc.stlc.html#Eval"><span class="id" title="inductive">Eval</span></a>.<br/>

<br/>
</div>

<div class="doc">
A tactic for repeatedly destructing all existentials in hypothesis <span class="inlinecode"><a class="idref" href="Stlc.Nom.html#H"><span class="id" title="variable">H</span></a></span>, 
    creating new variables with the <span class="inlinecode"><a class="idref" href="Stlc.CalcNotationsExamples.html#Examples.n"><span class="id" title="variable">n</span></a></span> preffix 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">dest_exs</span> <span class="id" title="var">H</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="keyword">let</span> <span class="id" title="var">i</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hi</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">Hi</span>]; <span class="id" title="var">dest_exs</span> <span class="id" title="var">Hi</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| [<span class="id" title="var">_</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A proof of normalization by induction on typing derivation. We are being very
    explicit in this proof and use proof automation only in obvious and tedious cases. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="Normalisation"><span class="id" title="lemma">Normalisation</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">exp</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">ty</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>) (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#exp"><span class="id" title="variable">exp</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">|==</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">val</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#exp"><span class="id" title="variable">exp</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Ty</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ty</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="Stlc.stlc.html#vInt"><span class="id" title="constructor">vInt</span></a> <span class="id" title="var">n</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">econstructor</span>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H2</span> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">H3</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="Stlc.stlc.html#vClos"><span class="id" title="constructor">vClos</span></a> <span class="id" title="var">E</span> <span class="id" title="var">x</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v1</span> <span class="id" title="var">Hv1</span>. <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHTy</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">E</span>:= <span class="id" title="var">E</span> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">#</span></a> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span> <a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">~&gt;</span></a> <span class="id" title="var">v1</span><a class="idref" href="Stlc.stlc.html#7ffa6db3c44edea188a5bbde52465055"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">apply</span> <span class="id" title="var">IHTy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.stlc.html#EquivExtend"><span class="id" title="lemma">EquivExtend</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHTy1</span> <span class="id" title="var">E</span> <span class="id" title="var">He</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">H</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHTy1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHTy2</span> <span class="id" title="var">E</span> <span class="id" title="var">He</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">H'</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHTy2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Heqv</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H'</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Heqv'</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">dest_exs</span> <span class="id" title="var">Heqv</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x0</span> <span class="id" title="var">into</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">E0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hveq</span> <span class="id" title="var">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H3</span> <span class="id" title="var">v'</span> <span class="id" title="var">Heqv'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v''</span> <span class="id" title="var">H''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H''</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v''</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="Stlc.stlc.html#Typing_ind"><span class="id" title="definition">Typing_ind</span></a>.<br/>
</div>

<div class="doc">
An alternative proof of normalization by induction on syntax 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="Normalisation_alt"><span class="id" title="lemma">Normalisation_alt</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">exp</span> : <a class="idref" href="Stlc.stlc.html#Exp"><span class="id" title="inductive">Exp</span></a>) (<span class="id" title="var">Gamma</span> : <a class="idref" href="Stlc.stlc.html#TEnv"><span class="id" title="definition">TEnv</span></a>) (<span class="id" title="var">ty</span> : <a class="idref" href="Stlc.stlc.html#Ty"><span class="id" title="inductive">Ty</span></a>) (<span class="id" title="var">E</span> : <a class="idref" href="Stlc.stlc.html#DEnv"><span class="id" title="definition">DEnv</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#exp"><span class="id" title="variable">exp</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#c18e6b5a125401daa94e9434ca60bed9"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">|==</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.stlc.html#e1af08f2064a3899c47d6328c0814b00"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">val</span>:<a class="idref" href="Stlc.stlc.html#Val"><span class="id" title="inductive">Val</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">|-</span></a> <a class="idref" href="Stlc.stlc.html#exp"><span class="id" title="variable">exp</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#e4fab06673c27431c1bea98c5975e821"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">[</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">|=</span></a> <a class="idref" href="Stlc.stlc.html#val"><span class="id" title="variable">val</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">@</span></a> <a class="idref" href="Stlc.stlc.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="Stlc.stlc.html#502199a0aa7906988a7e76de42a37a0d"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">exp</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">ty</span> <span class="id" title="var">E</span> <span class="id" title="var">Ty</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="Stlc.stlc.html#vInt"><span class="id" title="constructor">vInt</span></a> <span class="id" title="var">n</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ty</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Ty</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>)(<span class="id" title="var">ty</span>:=<span class="id" title="var">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H2</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="Stlc.stlc.html#vClos"><span class="id" title="constructor">vClos</span></a> <span class="id" title="var">E</span> <span class="id" title="var">s</span> <span class="id" title="var">exp</span>). <span class="id" title="tactic">split</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Ty</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">exp</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v1</span> <span class="id" title="var">Hv1</span>. <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHexp</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">Gamma</span>:=<a class="idref" href="Stlc.stlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">s</span> <span class="id" title="var">A</span>)(<span class="id" title="var">ty</span>:=<span class="id" title="var">B</span>)(<span class="id" title="var">E</span>:=<a class="idref" href="Stlc.stlc.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">E</span> <span class="id" title="var">s</span> <span class="id" title="var">v1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHexp</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.stlc.html#EquivExtend"><span class="id" title="lemma">EquivExtend</span></a>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHexp1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">Gamma</span>:=<span class="id" title="var">Gamma</span>)(<span class="id" title="var">ty</span>:= <span class="id" title="var">A</span> <a class="idref" href="Stlc.stlc.html#3dbbab75c4a5953ee3c8ba12d6cb2e26"><span class="id" title="notation">:-&gt;</span></a> <span class="id" title="var">ty</span>) (<span class="id" title="var">E</span>:=<span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHexp2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">Gamma</span>:=<span class="id" title="var">Gamma</span>)(<span class="id" title="var">ty</span>:=<span class="id" title="var">A</span>)(<span class="id" title="var">E</span>:=<span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHexp1</span> <span class="id" title="var">H</span> <span class="id" title="var">Heqv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> <span class="id" title="var">Hv1</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHexp2</span> <span class="id" title="var">H0</span> <span class="id" title="var">Heqv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v2</span> <span class="id" title="var">Hv2</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHexp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ev1</span> <span class="id" title="var">Heqv1</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ev2</span> <span class="id" title="var">Tv2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">dest_exs</span> <span class="id" title="var">Heqv1</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv1</span> <span class="id" title="var">Heqv2</span>]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> := <span class="id" title="var">Heqv2</span> <span class="id" title="var">v2</span> <span class="id" title="var">Tv2</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">Hv'</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
